<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Induction Motor Rotor Parameter Explorer</title>
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <!-- Plotly CDN -->
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
</head>
<body>
  <div class="topbar">
    <a href="#" class="logo-link" aria-label="SAIT Home">
      <img src="images/sait-logo.png" alt="SAIT logo" class="logo-img" />
    </a>
  </div>
  <header class="site-header">
    <div class="container">
      <h1>Induction Motor Rotor Parameter Explorer</h1>
      <p>Interactively explore how rotor resistance (<code>R<sub>2</sub></code>) and rotor reactance (<code>X<sub>2</sub></code>) affect torque and stator current across load (slip).</p>
    </div>
  </header>

  <main>
    <div class="container">
    <section class="controls">
      <h2>Motor Parameters</h2>
      <div class="grid">
        <fieldset class="presets">
          <legend>Rotor Design Presets</legend>
          <label><input type="radio" name="nema_design" value="NEMA_A" /> NEMA A</label></br>
          <label><input type="radio" name="nema_design" value="NEMA_B" checked /> NEMA B</label></br>
          <label><input type="radio" name="nema_design" value="NEMA_C" /> NEMA C</label></br>
          <label><input type="radio" name="nema_design" value="NEMA_D" /> NEMA D</label></br>
          <label><input type="radio" name="nema_design" value="WOUND" /> Wound Rotor/Custom Design</label></br>
        </fieldset>
        <!-- Rotor controls -->
        <div class="control rotor_control">
            <label for="r2">Rotor resistance R<sub>2</sub> (Ω)</label>
            <input type="range" id="r2" min="0.05" max="2" step="0.01" value="0.3" />
            <span id="r2_val">0.30 Ω</span>
          </div>
          <div class="control rotor_control">
            <label for="x2">Rotor reactance X<sub>2</sub> (Ω)</label>
            <input type="range" id="x2" min="0.05" max="2" step="0.01" value="0.5" />
            <span id="x2_val">0.50 Ω</span>
          </div>
        <div class="control">
          <label>No-load speed (rpm)</label>
          <output id="speed_noload_rpm">–</output>
        </div>
        <div class="control">
          <label for="percent_loaded">Percent of rated load</label>
          <input type="range" id="percent_loaded" min="0" max="300" step="1" value="100" />
          <div class="small-row">
            <span id="percent_loaded_val">100%</span>
            <span class="spacer"></span>
            <label for="speed_fullload_rpm" style="font-weight:normal">Loaded speed:</label>
            <output id="speed_fullload_rpm">–</output>
            <span class="muted" style="margin-left:6px; font-size:0.9em;">rpm</span>
          </div>
        </div>
        </div>


        <!-- Advanced (stator & system) -->
        <details class="advanced" close>
          <summary>Advanced parameters</summary>
          <div class="control">
            <label for="r1">Stator resistance R<sub>1</sub> (Ω)</label>
            <input type="number" id="r1" step="0.01" value="0.5" />
          </div>
          <div class="control">
            <label for="x1">Stator reactance X<sub>1</sub> (Ω)</label>
            <input type="number" id="x1" step="0.01" value="1.5" />
          </div>
          <div class="control">
            <label for="xm">Magnetizing reactance X<sub>m</sub> (Ω)</label>
            <input type="number" id="xm" step="0.1" value="30" />
          </div>
          <div class="control">
            <label for="vline">Line voltage V<sub>L-L</sub> (V)</label>
            <input type="number" id="vline" step="1" value="460" />
          </div>
          <div class="control">
            <label for="freq">Frequency f (Hz)</label>
            <input type="number" id="freq" step="1" value="60" />
          </div>
          <div class="control">
            <label for="poles">Number of poles p</label>
            <input type="number" id="poles" step="1" value="4" />
          </div>
        <div class="control">
          <label for="points">Resolution (number of slip points)</label>
          <input type="number" id="points" step="50" min="200" max="4000" value="800" />
        </div>
        </details>
        <div class="actions">
        </div>
      </div>
    </section>

    <section class="summary">
      <h2>Key Results</h2>
      <div class="cards">
        <div class="card">
          <h3>Peak (Breakdown) Torque</h3>
          <p><span id="tmax">–</span> N·m at slip <span id="s_tmax">–</span></p>
        </div>
        <div class="card">
          <h3>Starting Current (s=1)</h3>
          <p><span id="istart">–</span> A (line)</p>
        </div>
        <div class="card">
          <h3>No-load Current (s→0)</h3>
          <p><span id="inl">–</span> A (line)</p>
        </div>
        <div class="card">
          <h3>Loaded Speed Current</h3>
          <p><span id="iloaded">–</span> A (line)</p>
        </div>
      </div>
    </section>

    <section class="plots">
      <div class="plot" id="plot_torque">
        <div class="plot-header">
          <span>Torque vs Speed</span>
          <button class="toggle-plot" id="toggle_torque" aria-label="Toggle Torque Plot">–</button>
        </div>
        <div class="plot-content"><div id="torquePlot"></div></div>
      </div>
      <div class="plot" id="plot_current">
        <div class="plot-header">
          <span>Stator Line Current vs Slip</span>
          <button class="toggle-plot" id="toggle_current" aria-label="Toggle Current Plot">–</button>
        </div>
        <div class="plot-content"><div id="currentPlot"></div></div>
      </div>
    </section>

    <section class="notes">
      <h2>Model Notes</h2>
      <ul>
        <li>Per-phase approximate equivalent circuit with magnetizing branch <code>X<sub>m</sub></code> in parallel with rotor branch (<code>R<sub>2</sub>/s + jX<sub>2</sub></code>).</li>
        <li>Total impedance: <code>Z = (R<sub>1</sub> + jX<sub>1</sub>) + big[(jX<sub>m</sub>) parallel (R<sub>2</sub>/s + jX<sub>2</sub>)big]</code>.</li>
        <li>Line current magnitude computed from <code>I = V_phase / |Z|</code> with <code>V_phase = V_{L-L}/sqrt{3}</code> for Y connection.</li>
        <li>Air-gap power <code>P_ag = 3,|I_2|^2,(R<sub>2</sub>/s)</code>, torque <code>T = P_ag / omega_{sync}</code>, with synchronous speed <code>omega_{sync} = 4pi f / p</code>.</li>
        <li>Mechanical losses are neglected; results illustrate trends rather than exact nameplate values.</li>
      </ul>
    </section>
    </div>
  </main>

  <footer>
    <p>Built for interactive teaching &mdash; adjust parameters and observe how rotor design shifts torque-speed curve and current draw.</p>
  </footer>

  <script src="js/app.js"></script>
</body>
</html>
