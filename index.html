<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Induction Motor Rotor Parameter Explorer</title>
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <!-- Plotly CDN -->
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
</head>
<body>
  <div class="topbar">
    <a href="#" class="logo-link" aria-label="SAIT Home">
      <img src="images/sait-logo.png" alt="SAIT logo" class="logo-img" />
    </a>
  </div>
  <header class="site-header">
    <div class="container">
      <h1>Induction Motor Rotor Parameter Explorer</h1>
      <p>Interactively explore how rotor resistance (<code>R<sub>2</sub></code>) and rotor reactance (<code>X<sub>2</sub></code>) affect torque and stator current across load (slip).</p>
    </div>
  </header>

  <main>
    <div class="container">
    <section class="controls">
      <h2>Motor Parameters</h2>
      <div class="grid">
        <fieldset class="presets">
          <legend>Rotor Design Presets</legend>
          <label><input type="radio" name="nema_design" value="NEMA_A" /> NEMA A</label></br>
          <label><input type="radio" name="nema_design" value="NEMA_B" checked /> NEMA B</label></br>
          <label><input type="radio" name="nema_design" value="NEMA_C" /> NEMA C</label></br>
          <label><input type="radio" name="nema_design" value="NEMA_D" /> NEMA D</label></br>
          <label><input type="radio" name="nema_design" value="WOUND" /> Wound Rotor/Custom Design</label></br>
        </fieldset>
        <div class="control">
          <label><input type="checkbox" id="compare_nema" /> <strong>Compare all NEMA presets</strong></label>
        </div>
        <!-- Rotor controls -->
        <div class="control rotor_control">
            <label for="r2">Rotor resistance R<sub>2</sub> (Ω)</label>
            <input type="range" id="r2" min="0.05" max="5" step="0.01" value="0.3" />
            <span id="r2_val">0.30 Ω</span>
          </div>
          <div class="control rotor_control">
            <label for="x2">Rotor reactance X<sub>2</sub> (Ω)</label>
            <input type="range" id="x2" min="0.05" max="5" step="0.01" value="0.5" />
            <span id="x2_val">0.50 Ω</span>
          </div>
        <div class="control">
          <label>No-load speed (rpm)</label>
          <output id="speed_noload_rpm">–</output>
        </div>
        <div class="control">
          <label for="percent_loaded">Percent of rated load</label>
          <input type="range" id="percent_loaded" min="0" max="300" step="1" value="100" />
          <div class="small-row">
            <span id="percent_loaded_val">100%</span>
            <span class="spacer"></span>
            <label for="speed_fullload_rpm" style="font-weight:normal">Loaded speed:</label>
            <output id="speed_fullload_rpm">–</output>
            <span class="muted" style="margin-left:6px; font-size:0.9em;">rpm</span>
          </div>
        </div>
        </div>


        <!-- Advanced parameters are now assumed constants for better realism -->
        <div class="control" hidden="true">
          <label>Assumed system parameters (fixed):</label>
          <div class="small-row muted" style="font-size:0.95em;">
            R1 = <strong>0.50 Ω</strong>, X1 = <strong>1.10 Ω</strong>, Xm = <strong>25 Ω</strong>, VL-L = <strong>460 V</strong>, f = <strong>60 Hz</strong>, p = <strong>4</strong>
          </div>
          <div class="muted" style="font-size:0.85em; margin-top:6px;">Advanced controls removed — these constants are used internally to produce results that better correlate with typical motor behavior.</div>
        </div>
        <div class="actions">
        </div>
      </div>
    </section>

    <section class="summary">
      <h2>Key Results</h2>
      <div class="cards">
        <div class="card">
          <h3>Torque</h3>
          <p>Rated torque: <span id="rated_torque">–</span> N·m</p>
          <p>Starting torque: <span id="t_start_pct">–</span> % of rated</p>
          <p>Breakdown: <span id="tmax">–</span> N·m at slip <span id="s_tmax">–</span></p>
        </div>
        <div class="card">
          <h3>Starting Current (s=1)</h3>
          <p><span id="istart">–</span> A (line)</p>
        </div>
        <div class="card">
          <h3>No-load Current (s=0)</h3>
          <p><span id="inl">–</span> A (line)</p>
        </div>
        <div class="card">
          <h3>Loaded Speed Current</h3>
          <p><span id="iloaded">–</span> A (line)</p>
        </div>
        <div class="card">
          <h3>Loaded Power</h3>
          <p><span id="hp_loaded">–</span> hp</p>
        </div>
        <div class="card">
          <h3>Speed Regulation</h3>
          <p><span id="speed_reg">–</span> %</p>
        </div>
        <div class="card">
          <h3>Efficiency</h3>
          <p><span id="efficiency">–</span></p>
        </div>
      </div>
    </section>

    <section class="nema-compare" hidden="true">
      <h2>NEMA Configuration Comparison</h2>
      <p class="muted" style="font-size:0.95em;">Computed using the assumed system parameters shown above. Values are approximate and intended to illustrate typical relative behavior between NEMA rotor designs.</p>
      <div class="table-wrap">
        <table class="nema-table" aria-describedby="nema-compare">
          <thead>
            <tr>
              <th>Design</th>
              <th>Starting T (N·m)</th>
              <th>Pull-up T (N·m)</th>
              <th>Breakdown T (N·m)</th>
              <th>Rated T (N·m)</th>
              <th>Rated speed (rpm)</th>
              <th>Start I / Rated I (%)</th>
            </tr>
          </thead>
          <tbody id="nema_table_body">
            <!-- Filled by JS -->
          </tbody>
        </table>
        <div class="muted" style="font-size:0.85em; margin-top:6px;">Note: <strong>WOUND</strong> rotor preset is excluded from this NEMA comparison. Values are approximate and intended to illustrate relative behavior between NEMA A–D designs.</div>
      </div>
    </section>

    <section class="plots">
      <div class="plot" id="plot_torque">
        <div class="plot-header">
          <span>Torque vs Speed</span>
          <button class="toggle-plot" id="toggle_torque" aria-label="Toggle Torque Plot">–</button>
        </div>
        <div class="plot-content"><div id="torquePlot"></div></div>
      </div>
      <div class="plot" id="plot_current">
        <div class="plot-header">
          <span>Stator Line Current vs Slip</span>
          <button class="toggle-plot" id="toggle_current" aria-label="Toggle Current Plot">–</button>
        </div>
        <div class="plot-content"><div id="currentPlot"></div></div>
      </div>
    </section>

    <section class="notes" hidden="true">
      <h2>Model Notes</h2>
      <ul>
        <li>Per-phase approximate equivalent circuit with magnetizing branch <code>X<sub>m</sub></code> in parallel with rotor branch (<code>R<sub>2</sub>/s + jX<sub>2</sub></code>).</li>
        <li>Total impedance: <code>Z = (R<sub>1</sub> + jX<sub>1</sub>) + big[(jX<sub>m</sub>) parallel (R<sub>2</sub>/s + jX<sub>2</sub>)big]</code>.</li>
        <li>Line current magnitude computed from <code>I = V_phase / |Z|</code> with <code>V_phase = V_{L-L}/sqrt{3}</code> for Y connection.</li>
        <li>Air-gap power <code>P_ag = 3,|I_2|^2,(R<sub>2</sub>/s)</code>, torque <code>T = P_ag / omega_{sync}</code>, with synchronous speed <code>omega_{sync} = 4pi f / p</code>.</li>
        <li>You can compare analytical Thevenin torque curves for each NEMA preset using the "Compare all NEMA presets" checkbox in the presets panel.</li>
        <li>Mechanical losses are neglected; results illustrate trends rather than exact nameplate values.</li>
      </ul>
    </section>
    </div>
  </main>

  <footer>
    <p>Built for interactive teaching &mdash; adjust parameters and observe how rotor design shifts torque-speed curve and current draw.</p>
  </footer>

  <script src="js/app.js"></script>
</body>
</html>
